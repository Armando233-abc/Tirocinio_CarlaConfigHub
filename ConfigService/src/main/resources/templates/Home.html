<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carla Configurator</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <script th:src="@{/JS/script.js}" defer></script>
</head>
<body>

<div class="app-layout">
    <!-- SIDEBAR -->
    <aside class="sidebar">
        <div class="brand">
            <h1>CARLA<span>HUB</span></h1>
            <p>Configuratore Scenari XML per Simulazione</p>
        </div>

        <form id="configForm" class="form-container">
            <!-- METEO -->
            <div class="control-section">
                <div class="section-header">
                    <div class="section-icon">üå¶Ô∏è</div>
                    <div class="section-title">Condizioni Meteo</div>
                </div>

                <div class="form-group">
                    <div class="label-with-value">
                        <label class="form-label">Nuvolosit√†</label>
                        <span id="val-cloudiness" class="value-badge">0%</span>
                    </div>
                    <input type="range" id="cloudiness" min="0" max="100" value="0">
                    <p class="input-description">Controlla la copertura nuvolosa nel cielo della simulazione</p>
                </div>

                <div class="form-group">
                    <div class="label-with-value">
                        <label class="form-label">Precipitazioni</label>
                        <span id="val-precipitation" class="value-badge">0%</span>
                    </div>
                    <input type="range" id="precipitation" min="0" max="100" value="0">
                    <p class="input-description">Intensit√† della pioggia durante la simulazione</p>
                </div>

                <div class="form-group">
                    <div class="label-with-value">
                        <label class="form-label">Angolo Sole</label>
                        <span id="val-sunAltitude" class="value-badge">45¬∞</span>
                    </div>
                    <input type="range" id="sunAltitude" min="-90" max="90" value="45">
                    <p class="input-description">Posizione del sole nell'orizzonte (alba, tramonto, mezzogiorno)</p>
                </div>

                <input type="hidden" id="windIntensity" value="0">
            </div>

            <!-- VEICOLO -->
            <div class="control-section">
                <div class="section-header">
                    <div class="section-icon">üöó</div>
                    <div class="section-title">Configurazione Veicolo</div>
                </div>

                <div class="form-group">
                    <label class="form-label">Modello Veicolo</label>
                    <select id="vehicleModel">
                        <option value="vehicle.tesla.model3">Tesla Model 3</option>
                        <option value="vehicle.audi.etron">Audi e-tron</option>
                        <option value="vehicle.nissan.patrol">Nissan Patrol</option>
                    </select>
                    <p class="input-description">Scegli il modello di auto da utilizzare nella simulazione</p>
                </div>

                <div class="form-group">
                    <label class="form-label">Colore Carrozzeria</label>
                    <input type="color" id="vehicleColor" value="#3498db">
                    <p class="input-description">Personalizza il colore del veicolo</p>
                </div>

                <div class="form-group">
                    <label class="form-label">Modalit√† Autopilot</label>
                    <select id="autopilot">
                        <option value="true">Attivo - Guida Autonoma</option>
                        <option value="false">Disattivo - Controllo Manuale</option>
                    </select>
                    <p class="input-description">Abilita o disabilita il sistema di guida autonoma</p>
                </div>
            </div>

            <!-- SCENARIO -->
            <div class="control-section">
                <div class="section-header">
                    <div class="section-icon">üèôÔ∏è</div>
                    <div class="section-title">Ambiente e Traffico</div>
                </div>

                <div class="form-group">
                    <label class="form-label">Mappa Citt√†</label>
                    <select id="town">
                        <option value="Town01">Town 01 - Citt√† Base</option>
                        <option value="Town02">Town 02 - Centro Piccolo</option>
                        <option value="Town03">Town 03 - Area Urbana</option>
                        <option value="Town04">Town 04 - Autostrada</option>
                    </select>
                    <p class="input-description">Seleziona l'ambiente dove eseguire la simulazione</p>
                </div>

                <div class="form-group">
                    <div class="label-with-value">
                        <label class="form-label">Densit√† Traffico</label>
                        <span id="val-trafficDensity" class="value-badge">30%</span>
                    </div>
                    <input type="range" id="trafficDensity" min="0" max="100" value="30">
                    <p class="input-description">Numero di veicoli presenti sulle strade</p>
                </div>

                <input type="hidden" id="pedestrians" value="10">
            </div>
        </form>

        <div class="button-container">
            <button type="submit" form="configForm" id="generateBtn">
                ‚ö° Genera Configurazione XML
            </button>
        </div>
    </aside>

    <!-- PREVIEW AREA -->
    <main class="preview-area">
        <div class="preview-toolbar">
            <div class="toolbar-title">
                <h2>Output XML</h2>
                <span>Configurazione Scenario</span>
            </div>
            <button id="downloadBtn" class="hidden">
                ‚¨áÔ∏è Scarica XML
            </button>
        </div>

        <div class="editor-container">
            <!-- EMPTY STATE -->
            <div id="placeholderState" class="state-view">
                <div class="empty-state">
                    <div class="empty-icon">üìù</div>
                    <h3>Inizia la Configurazione</h3>
                    <p>Imposta i parametri sulla sinistra e<br>premi "Genera Configurazione XML"</p>
                </div>
            </div>

            <!-- LOADING STATE -->
            <div id="loadingArea" class="state-view hidden">
                <div class="loading-container">
                    <div class="spinner"></div>
                    <p class="loading-text">Generazione configurazione in corso....</p>
                    <div class="progress-bar-container">
                        <div class="progress-bar"></div>
                    </div>
                </div>
            </div>

            <!-- RESULT STATE -->
            <div id="resultArea" class="state-view hidden" style="background: transparent;">
                <textarea id="xmlOutput" readonly spellcheck="false"></textarea>
            </div>

            <!-- ERROR STATE -->
            <div id="errorArea" class="state-view hidden">
                <div class="error-container">
                    <div class="error-icon">‚ö†Ô∏è</div>
                    <h3>Errore di Generazione</h3>
                    <p id="errorMessage">Si √® verificato un errore durante la generazione del file XML.</p>
                </div>
            </div>
        </div>
    </main>
</div>

</body>
</html>